/**
 * Filters Component
 * 
 * Table filters for admin product list.
 * Consolidates: admin-table-filters.css
 * 
 * @package AffiliateProductShowcase
 * @since 2.0.0
 */

@use '../01-settings/tokens-vars' as tokens;
@use '../02-tools/mixins';
@use '../02-tools/functions';

// ============================================
// Hide Native Add New Button
// ============================================

// stylelint-disable-next-line selector-class-pattern
body.post-type-aps_product.edit-php {

	.page-title-action,
	.wrap .page-title-action {
		display: none !important; // Override WP core styles
	}
}

// ============================================
// Featured Filter
// ============================================

.aps-featured-filter {
	display: inline-flex;
	align-items: center;
	gap: tokens.$spacing-2;
	margin-inline-start: tokens.$spacing-4;
	font-size: tokens.$font-size-sm;
	color: tokens.$color-text-primary;
	cursor: pointer;
	user-select: none;
	transition: color tokens.$transition-fast;

	&:hover {
		color: tokens.$wp-admin-theme-color;
	}

	input[type="checkbox"] {
		margin: 0;
		width: tokens.$spacing-4;
		height: tokens.$spacing-4;
		cursor: pointer;
		accent-color: tokens.$wp-admin-theme-color;

		&:focus-visible {
			outline: 2px solid tokens.$wp-admin-theme-color;
			outline-offset: 2px;
		}
	}

	@include mixins.wp-tablet-down {
		margin-inline-start: 0;
		margin-block-start: tokens.$spacing-2;
		width: 100%;
	}
}

// ============================================
// Filter Dropdowns
// ============================================

.aps-filter-dropdown {
	@include mixins.input-base;

	margin-inline-end: tokens.$spacing-2;
	padding: tokens.$spacing-1 tokens.$spacing-2;
	font-size: tokens.$font-size-sm;
	min-height: tokens.$admin-input-height;

	@include mixins.wp-tablet-down {
		margin-inline-end: tokens.$spacing-1;
		margin-block-end: tokens.$spacing-2;
		flex: 1;
	}
}

// ID selectors for WordPress compatibility
// stylelint-disable selector-id-pattern
#aps_category_filter,
#aps_tag_filter {
	@extend .aps-filter-dropdown;
}

// stylelint-enable selector-id-pattern

// ============================================
// Search Input
// ============================================

.aps-search-input {
	@include mixins.input-base;

	margin-inline-start: tokens.$spacing-2;
	padding: tokens.$spacing-1 tokens.$spacing-2;
	font-size: tokens.$font-size-sm;
	min-width: tokens.$empty-state-min-height;
	min-height: tokens.$admin-input-height;

	&::placeholder {
		color: tokens.$color-text-muted;
		font-style: italic;
	}

	@include mixins.wp-tablet-down {
		margin-inline-start: 0;
		margin-block-start: tokens.$spacing-2;
		width: 100%;
		min-width: auto;
	}
}

// stylelint-disable-next-line selector-id-pattern
#aps_search {
	@extend .aps-search-input;
}

// ============================================
// Sort Filter
// ============================================

.aps-sort-filter {
	// Replaced float:left with inline-flex
	display: inline-flex;
	align-items: center;
	margin-inline-end: tokens.$spacing-3;
	margin-block-end: tokens.$spacing-3;

	.postform {
		@include mixins.input-base;

		margin-inline-end: tokens.$spacing-2;
		padding: tokens.$spacing-1 tokens.$spacing-3;
		font-size: tokens.$font-size-sm;
		min-height: tokens.$admin-input-height;
	}

	@include mixins.wp-tablet-down {
		float: none;
		display: flex;
		width: 100%;
		margin-inline-end: 0;

		.postform {
			flex: 1;
		}
	}
}

// ============================================
// Tablenav Adjustments
// ============================================

.tablenav {

	.aps-sort-filter,
	.aps-featured-filter {
		@include mixins.wp-tablet-down {
			float: none;
			display: flex;
			width: 100%;
		}
	}
}

// ============================================
// Accessibility
// ============================================

@include mixins.reduced-motion {

	.aps-featured-filter,
	.aps-filter-dropdown,
	.aps-search-input {
		transition: none;
	}
}

@include mixins.high-contrast {

	.aps-filter-dropdown,
	.aps-search-input {
		border-width: 2px;

		&:focus {
			outline-width: 3px;
		}
	}
}