/**
 * Tabs Component
 * 
 * Settings page pill tab navigation.
 * Consolidates: settings.css tab styles
 * 
 * @package AffiliateProductShowcase
 * @since 2.0.0
 */

@use '../01-settings/tokens-vars' as *;
@use '../02-tools/mixins' as *;

// ============================================
// Tabs Container
// ============================================

.aps-tabs {
	display: flex;
	flex-wrap: wrap;
	gap: $spacing-3;
	padding: $spacing-5;
	background: $color-slate-50;
	border-radius: $radius-xl;
	border: 1px solid $color-slate-200;
	margin-bottom: $spacing-6;

	@include md-down {
		justify-content: center;
		padding: $spacing-4;
		gap: $spacing-2;
	}
}

// ============================================
// Individual Tab
// ============================================

.aps-tab {
	display: inline-flex;
	align-items: center;
	gap: $spacing-2;
	padding: $spacing-3 $spacing-5;
	background: $color-white;
	border: 1px solid $color-slate-200;
	border-radius: $radius-full;
	color: $color-slate-500;
	font-size: $font-size-sm;
	font-weight: $font-weight-medium;
	text-decoration: none;
	transition:
		background-color 200ms ease-in-out,
		border-color 200ms ease-in-out,
		color 200ms ease-in-out,
		transform 200ms ease-in-out,
		box-shadow 200ms ease-in-out;
	cursor: pointer;
	white-space: nowrap;
	box-shadow: $shadow-sm;
	position: relative;
	overflow: hidden;

	// Shine effect
	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: -100%;
		width: 100%;
		height: 100%;
		background: linear-gradient(90deg,
				transparent,
				rgba(255, 255, 255, 0.4),
				transparent);
		transition: left 0.5s ease;
	}

	&:hover {
		background: $color-white;
		border-color: $color-slate-300;
		color: $color-slate-700;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
		transform: translateY(-1px);

		&::before {
			left: 100%;
		}
	}

	&:focus-visible {
		outline: none;
		box-shadow: 0 0 0 3px rgba($color-info, 0.3), 0 4px 6px rgba(0, 0, 0, 0.07);
		border-color: $color-info;
	}

	&:active {
		transform: translateY(0);
		box-shadow: $shadow-sm;
	}

	// Active state
	&.is-active {
		background: $wp-admin-theme-color;
		border-color: $wp-admin-theme-color;
		color: $color-white;
		box-shadow: 0 4px 12px rgba($color-primary, 0.4);
		font-weight: $font-weight-semibold;

		&:hover {
			background: $wp-admin-theme-color-darker-10;
			border-color: $wp-admin-theme-color-darker-10;
			box-shadow: 0 6px 16px rgba($color-primary, 0.5);
		}

		&:focus-visible {
			box-shadow: 0 0 0 3px rgba($color-info, 0.4), 0 6px 16px rgba($color-primary, 0.5);
		}

		&::before {
			display: none;
		}
	}

	// Disabled state
	&.is-disabled {
		background: $color-slate-100;
		border-color: $color-slate-200;
		color: $color-slate-400;
		cursor: not-allowed;
		pointer-events: none;
		box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.03);

		&:hover {
			transform: none;
			box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.03);
		}

		&::before {
			display: none;
		}
	}

	// Responsive
	@include md-down {
		padding: $spacing-2 $spacing-4;
		font-size: $font-size-xs;
	}

	@include xs-down {
		flex: 1;
		justify-content: center;
		min-width: 120px;
	}
}

.aps-tab__icon {
	font-size: $font-size-lg;
	line-height: 1;
	filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.1));

	@include md-down {
		font-size: $font-size-base;
	}
}

.aps-tab__badge {
	display: inline-block;
	padding: 3px 8px;
	margin-left: $spacing-2;
	background: linear-gradient(135deg, $color-warning 0%, $color-warning-dark 100%);
	color: $color-white;
	font-size: 9px;
	font-weight: $font-weight-bold;
	border-radius: $radius-full;
	text-transform: uppercase;
	letter-spacing: $letter-spacing-wide;
	box-shadow: $shadow-sm;
}

// ============================================
// Settings Content Card
// ============================================

.aps-settings-card {
	background: $color-white;
	border-radius: $radius-xl;
	padding: $spacing-10;
	box-shadow: $shadow-sm;
	border: 1px solid $color-slate-200;

	h2 {
		margin: 0 0 $spacing-3 0;
		font-size: $font-size-lg;
		font-weight: $font-weight-semibold;
		color: $color-slate-800;
	}

	>p {
		margin: 0 0 $spacing-8 0;
		color: $color-slate-500;
		font-size: $font-size-sm;
	}

	@include md-down {
		padding: $spacing-6;
	}
}

// ============================================
// Toggle Switch
// ============================================

.aps-toggle {
	appearance: none;
	width: 44px;
	height: 24px;
	background: $color-slate-200;
	border-radius: $radius-full;
	position: relative;
	cursor: pointer;
	transition: background $transition-fast;
	border: none;
	vertical-align: middle;

	&::after {
		content: '';
		position: absolute;
		top: 2px;
		left: 2px;
		width: 20px;
		height: 20px;
		background: $color-white;
		border-radius: 50%;
		transition: transform $transition-fast;
		box-shadow: $shadow-sm;
	}

	&:checked {
		background: $wp-admin-theme-color;

		&::after {
			transform: translateX(20px);
		}
	}

	&:focus-visible {
		outline: 2px solid $wp-admin-theme-color;
		outline-offset: 2px;
	}

	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}
}

.aps-toggle-label {
	display: inline-flex;
	align-items: center;
	gap: $spacing-3;
	cursor: pointer;
	user-select: none;
}

// ============================================
// Color Picker
// ============================================

.aps-color-picker {
	padding: 3px 5px;
	border: 1px solid $color-border-dark;
	border-radius: $radius-sm;
	background: $color-white;
	font-size: $font-size-base;
	line-height: $line-height-normal;
	color: $color-text-dark;

	&:focus {
		border-color: $wp-admin-theme-color;
		box-shadow: 0 0 0 1px $wp-admin-theme-color;
		outline: none;
	}
}

// WordPress color picker override
.wp-picker-container {
	display: inline-block;

	.wp-color-result {
		border: 1px solid $color-border-dark;
		border-radius: $radius-sm;
		box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25);

		&:focus {
			border-color: $wp-admin-theme-color;
			box-shadow: 0 0 0 1px $wp-admin-theme-color;
		}
	}

	.wp-picker-open+.wp-picker-input-wrap {
		display: inline-flex;
		align-items: center;
		gap: 5px;
	}
}

// ============================================
// Form Table (WordPress Override)
// ============================================

.aps-settings-card .form-table {
	margin: 0;

	th {
		padding: $spacing-5 $spacing-5 $spacing-5 0;
		width: 200px;
		font-weight: $font-weight-medium;
		color: $color-slate-700;
		vertical-align: top;
	}

	td {
		padding: $spacing-5 0;
	}

	@include md-down {

		th,
		td {
			display: block;
			width: 100%;
			padding: $spacing-2 0;
		}
	}
}

.aps-settings-card .description {
	margin-top: $spacing-2;
	color: $color-slate-500;
	font-size: $font-size-sm;
	font-style: normal;
}

// ============================================
// Primary Button Override
// ============================================

.aps-settings-card .button-primary {
	background: $wp-admin-theme-color;
	border-color: $wp-admin-theme-color;
	padding: $spacing-2 $spacing-6;
	font-size: $font-size-base;
	font-weight: $font-weight-medium;
	border-radius: $radius-md;
	transition:
		background-color 200ms ease-in-out,
		border-color 200ms ease-in-out,
		box-shadow 200ms ease-in-out;

	&:hover {
		background: $wp-admin-theme-color-darker-10;
		border-color: $wp-admin-theme-color-darker-10;
	}

	&:focus {
		box-shadow: 0 0 0 1px $color-white, 0 0 0 3px $wp-admin-theme-color;
	}
}

// ============================================
// Accessibility
// ============================================

@include reduced-motion {

	.aps-tab,
	.aps-toggle,
	.aps-settings-card .button-primary {
		transition: none;

		&:hover {
			transform: none;
		}
	}

	.aps-tab::before {
		transition: none;
	}
}