/**
 * Forms Component (BEM)
 *
 * Reusable form styles with consistent styling.
 *
 * @package AffiliateProductShowcase
 * @since 1.0.0
 */

@use '../variables' as *;
@use '../mixins/breakpoints' as *;
@use '../mixins/focus' as *;

// ============================================
// Block: Form Field
// ============================================

.aps-form-field {
	margin-bottom: $aps-spacing-4;

	&:last-child {
		margin-bottom: 0;
	}

	&__label {
		display: block;
		margin-bottom: $aps-spacing-1;
		font-size: $aps-font-size-base;
		font-weight: $aps-font-weight-medium;
		color: $aps-color-text-main;
		line-height: $aps-line-height-normal;
	}

	&__tip {
		display: block;
		font-size: $aps-font-size-xs;
		font-weight: $aps-font-weight-normal;
		color: $aps-color-text-muted;
		margin-top: $aps-spacing-1;
		font-style: italic;
	}

	&__required {
		color: $aps-color-danger;
		font-weight: $aps-font-weight-semibold;
	}

	// ============================================
	// Element: Input
	// ============================================

	&__input {
		width: 100%;
		padding: $aps-spacing-2 $aps-spacing-3;
		font-size: $aps-font-size-base;
		line-height: $aps-line-height-normal;
		color: $aps-color-text-main;
		background: $aps-color-bg-input;
		border: 1px solid $aps-color-border;
		border-radius: $aps-radius-sm;
		box-shadow: $aps-shadow-sm;
		transition: all $aps-transition-base ease;

		&:focus {
			border-color: $aps-color-primary;
			box-shadow: $aps-shadow-focus;
			outline: none;
		}

		&--required:focus {
			border-color: $aps-color-danger;
			box-shadow: $aps-shadow-focus-error;
		}

		&::placeholder {
			color: $aps-color-text-muted;
		}
	}

	// ============================================
	// Element: Textarea
	// ============================================

	&__textarea {
		min-height: 5rem;
		resize: vertical;
		font-family: $aps-font-family-base;

		&:focus {
			border-color: $aps-color-primary;
			box-shadow: $aps-shadow-focus;
		}
	}

	// ============================================
	// Element: Select
	// ============================================

	&__select {
			width: 100%;
			padding: $aps-spacing-2 $aps-spacing-3 $aps-spacing-2;
			font-size: $aps-font-size-base;
			line-height: $aps-line-height-normal;
			color: $aps-color-text-main;
			background: $aps-color-bg-input;
			border: 1px solid $aps-color-border;
			border-radius: $aps-radius-sm;
			box-shadow: $aps-shadow-sm;
			transition: all $aps-transition-base ease;
			appearance: none;
			cursor: pointer;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23646970' d='M6 9L2 5h8z'/%3E%3C/svg%3E");
			background-repeat: no-repeat;
			background-position: right $aps-spacing-3 center;

		&:focus {
			border-color: $aps-color-primary;
			box-shadow: $aps-shadow-focus;
			outline: none;
		}

		&:disabled {
			opacity: 0.6;
			cursor: not-allowed;
		}
	}

	// ============================================
	// Element: Checkbox
	// ============================================

	&__checkbox {
		& label {
			display: flex;
			align-items: center;
			gap: $aps-spacing-2;
			cursor: pointer;
			user-select: none;
		}

		& input[type="checkbox"] {
			width: $aps-font-size-lg;
			height: $aps-font-size-lg;
			margin: 0;
			cursor: pointer;

			&:focus {
				outline: 2px solid $aps-color-primary;
				outline-offset: 2px;
				border-radius: $aps-radius-sm;
			}
		}
	}

	// ============================================
	// Element: Radio
	// ============================================

	&__radio {
		& label {
			display: flex;
			align-items: center;
			gap: $aps-spacing-2;
			cursor: pointer;
			user-select: none;
		}

		& input[type="radio"] {
			width: $aps-font-size-lg;
			height: $aps-font-size-lg;
			margin: 0;
			cursor: pointer;

			&:focus {
				outline: 2px solid $aps-color-primary;
				outline-offset: 2px;
				border-radius: $aps-radius-sm;
			}
		}
	}

	// ============================================
	// Element: Input Group
	// ============================================

	&__group {
		display: flex;
		align-items: stretch;
		width: 100%;

		&__input {
			flex: 1;
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;

			&:focus {
				z-index: 1;
			}
		}

		&__prefix,
		&__suffix {
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0 $aps-spacing-3;
			background: $aps-color-bg-light;
			border: 1px solid $aps-color-border;
			color: $aps-color-text-muted;
			font-size: $aps-font-size-sm;
			font-weight: $aps-font-weight-medium;
			min-width: 3rem;
		}

		&__prefix {
			border-top-left-radius: $aps-radius-sm;
			border-bottom-left-radius: $aps-radius-sm;
			border-right: none;
		}

		&__suffix {
			border-top-right-radius: $aps-radius-sm;
			border-bottom-right-radius: $aps-radius-sm;
			border-left: none;
		}
	}

	// ============================================
	// Element: Error Message
	// ============================================

	&__error {
		display: flex;
		align-items: flex-start;
		gap: $aps-spacing-1;
		padding: $aps-spacing-2;
		background: $aps-color-danger-light;
		border-left: 3px solid $aps-color-danger;
		border-radius: $aps-radius-sm;
		color: $aps-color-danger-text;
		font-size: $aps-font-size-sm;

		&::before {
			content: '⚠';
			font-size: $aps-font-size-base;
		}
	}

	// ============================================
	// Element: Success Message
	// ============================================

	&__success {
		display: flex;
		align-items: flex-start;
		gap: $aps-spacing-1;
		padding: $aps-spacing-2;
		background: $aps-color-success-light;
		border-left: 3px solid $aps-color-success;
		border-radius: $aps-radius-sm;
		color: $aps-color-success-text;
		font-size: $aps-font-size-sm;

		&::before {
			content: '✓';
			font-size: $aps-font-size-base;
		}
	}

	// ============================================
	// Responsive Design
	// ============================================

	@include tablet-down {
		&__group {
			flex-direction: column;
			gap: $aps-spacing-2;
		}

		&__input {
			width: 100%;
			border-radius: $aps-radius-sm;
		}

		&__prefix,
		&__suffix {
			width: 100%;
			border-radius: $aps-radius-sm;
			padding: $aps-spacing-2;
		}
	}
}

// ============================================
// Block: Form Section
// ============================================

.aps-form-section {
	background: $aps-color-bg-card;
	border: 1px solid $aps-color-border-light;
	border-radius: $aps-radius-sm;
	box-shadow: $aps-shadow-sm;
	overflow: hidden;

	&__title {
		margin: 0;
		padding: $aps-spacing-3 $aps-spacing-4;
		background: $aps-color-bg-light;
		border-bottom: 1px solid $aps-color-border-light;
		font-size: $aps-font-size-sm;
		font-weight: $aps-font-weight-semibold;
		color: $aps-color-text-main;
		display: flex;
		align-items: center;
		gap: $aps-spacing-2;

		& .dashicons {
			width: $aps-font-size-base;
			height: $aps-font-size-base;
			font-size: $aps-font-size-base;
			color: $aps-color-text-muted;
		}
	}

	&__content {
		padding: $aps-spacing-5;
	}
}

// ============================================
// Accessibility
// ============================================

.aps-form-field {
	&__input:required,
	&__select:required {
		&:focus {
			border-color: $aps-color-danger;
		}
	}

	&__label--required::after {
		content: ' *';
		color: $aps-color-danger;
		margin-left: $aps-spacing-1;
	}
}

// ============================================
// Print Styles
// ============================================

@media print {
	.aps-form-section {
		page-break-inside: avoid;
		box-shadow: none;
		border: 1px solid #000;
	}

	.aps-form-field__input,
	.aps-form-field__select,
	.aps-form-field__textarea {
		border: 1px solid #000;
	}
}
