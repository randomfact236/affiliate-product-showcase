!function(t){"use strict";const{showNotice:e,ajax:a,getAjaxUrl:n,getCurrentStatusView:s}=window.APS_Utils,o="undefined"!=typeof apsAdminVars?apsAdminVars:{};t(function(){!function(){const e=t(".aps-category-checkboxes-wrapper"),a=t('input[name="slug"]').parent();e.length&&a.length&&(e.insertAfter(a),e.removeAttr("hidden"))}(),t("#edittag").length&&function(){const e=t("#edittag .submit");if(e.length&&!e.find(".aps-cancel-term-edit").length){const a=o.cancel_url||"",n=o.cancel_text||"Cancel";t("<a></a>").addClass("button button-secondary aps-cancel-term-edit").attr("href",a).text(n).prependTo(e)}}(),t(document).on("focus",".aps-category-status-select",function(){t(this).data("original-status",t(this).val())}),t(document).on("change",".aps-category-status-select",function(){const n=t(this),s=n.data("term-id"),i=n.val();let r=n.data("original-status");r||(r=n.find("option[selected]").val()||i),"undefined"!=typeof apsAdminVars?(n.prop("disabled",!0),a({data:{action:"aps_toggle_aps_category_status",nonce:o.nonce,term_id:s,status:i}}).done(t=>{n.prop("disabled",!1),n.data("original-status",i),e("success",t.data?.message||o.success_text||"Updated.")}).fail(()=>{n.prop("disabled",!1),n.val(r),e("error",o.error_text||"Request failed.")})):alert("Error: missing config. Please refresh the page.")}),t(document).on("click",'a[href*="admin-post.php?action=aps_category_row_action"]',function(i){if("undefined"==typeof apsAdminVars)return;if(!n())return;i.preventDefault();const r=t(this),c=r.attr("href");let d;try{d=new URL(c,window.location.origin)}catch(t){return void(window.location.href=c)}const l=d.searchParams.get("term_id"),u=d.searchParams.get("do");if(!l||!u)return void(window.location.href=c);const f=r.closest("tr"),p=r.text();r.text(p+"...").addClass("disabled"),a({data:{action:"aps_aps_category_row_action",nonce:o.row_action_nonce,term_id:l,do:u}}).done(a=>{r.text(p).removeClass("disabled");const n=s(),o=a.data?.status||"",i=a.data?.deleted;i?f.fadeOut(150,function(){t(this).remove()}):o&&(!function(t,e){const a=t.find(".aps-category-status-select");a.length&&(a.val(e),a.data("original-status",e))}(f,o),"all"!==n&&n!==o&&f.fadeOut(150,function(){t(this).remove()}),"all"===n&&"trashed"===o&&f.fadeOut(150,function(){t(this).remove()})),e("success",a.data?.message||"Done.")}).fail(()=>{r.text(p).removeClass("disabled"),e("error","Request failed.")})})})}(jQuery);