!function(t){"use strict";const{showNotice:e,ajax:s,shouldKeepRowInCurrentView:a,parseQueryParamsFromUrl:o}=window.APS_Utils,n="undefined"!=typeof apsAdminVars?apsAdminVars:{};t(function(){t(document).on("focus",".aps-tag-status-select",function(){t(this).data("aps-prev",t(this).val())}),t(document).on("change",".aps-tag-status-select",function(){const o=t(this),r=o.data("term-id"),i=o.val(),c=o.data("aps-prev");o.prop("disabled",!0),s({data:{action:"aps_toggle_tag_status",nonce:n.nonce||"",term_id:r,status:i}}).done(s=>{if(!s?.success)throw s;o.prop("disabled",!1),e("success",s.data?.message||n.success_text||"Tag updated."),a(i)||o.closest("tr").fadeOut(150,function(){t(this).remove()})}).fail(t=>{o.prop("disabled",!1),void 0!==c&&o.val(c);const s=t.responseJSON?.data?.message||n.error_text||"Request failed.";e("error",s)})}),t(document).on("click",'a[href*="admin-post.php?action=aps_tag_row_action"]',function(r){const i=t(this),c=i.attr("href");if(!c)return;r.preventDefault();const d=o(c),u=d.get("term_id"),l=d.get("row_action");u&&l?(i.addClass("disabled"),s({data:{action:"aps_tag_row_action",nonce:n.row_action_nonce||"",term_id:u,row_action:l}}).done(s=>{if(i.removeClass("disabled"),!s?.success)throw s;const o=s.data||{};e("success",o.message||"Done.");let n=t(`#tag-${u}`);n.length||(n=i.closest("tr")),"delete_permanently"!==l?o.status&&(n.find(".aps-tag-status-select").val(o.status),a(o.status)||n.fadeOut(150,function(){t(this).remove()})):n.fadeOut(150,function(){t(this).remove()})}).fail(t=>{i.removeClass("disabled");const s=t.responseJSON?.data?.message||n.error_text||"Request failed.";e("error",s)})):window.location.href=c})})}(jQuery);